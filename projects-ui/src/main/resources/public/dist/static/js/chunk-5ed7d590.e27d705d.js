(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ed7d590"],{"00b6":function(t,e,i){"use strict";i("2016")},2016:function(t,e,i){},d5b1:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"containers main-box"},[i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-zoom-in"},on:{click:function(e){return t.zoomViewport(!0)}}},[t._v("放大")]),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-zoom-out"},on:{click:function(e){return t.zoomViewport(!1)}}},[t._v("缩小")]),i("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-rank"},on:{click:t.fitViewport}},[t._v("适中")]),i("div",{ref:"flowCanvas",staticClass:"canvas"})],1)},n=[],r=i("c7eb"),a=i("1da1"),h=(i("d3b7"),i("159b"),i("7db0"),i("bf4a")),d={name:"FlowView",props:{xmlData:{type:String,default:""},taskList:{type:Array,default:function(){return[]}}},data:function(){return{bpmnViewer:null}},watch:{xmlData:function(t){t&&this.getImg(t)}},mounted:function(){this.bpmnViewer&&this.bpmnViewer.destroy(),this.bpmnViewer=new h["a"]({container:this.$refs.flowCanvas,height:"calc(100vh - 200px)"})},methods:{getImg:function(t){var e=this;return Object(a["a"])(Object(r["a"])().mark((function i(){var o;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e,i.prev=1,i.next=4,o.bpmnViewer.importXML(t);case 4:o.fitViewport(),void 0!==o.taskList&&o.taskList.length>0&&o.fillColor(),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](1),console.error(i.t0.message,i.t0.warnings);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},setNodeColor:function(t,e,i){for(var o=0;o<t.length;o++)i.addMarker(t[o],e)},fitViewport:function(){this.zoom=this.bpmnViewer.get("canvas").zoom("fit-viewport","auto")},zoomViewport:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoom=this.bpmnViewer.get("canvas").zoom(),this.zoom+=t?.1:-.1,this.zoom>=.2&&this.bpmnViewer.get("canvas").zoom(this.zoom)},fillColor:function(){var t=this,e=this.bpmnViewer.get("canvas");this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach((function(i){var o,n=t.taskList.find((function(t){return t.key===i.id})),r=t.taskList.find((function(t){return!t.completed})),a=t.taskList[t.taskList.length-1];if("bpmn:UserTask"===i.$type)n&&(e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(o=i.outgoing)||void 0===o||o.forEach((function(i){var o=t.taskList.find((function(t){return t.key===i.targetRef.id}));o&&(r&&n.key===r.key&&!r.completed?(e.addMarker(i.id,r.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,r.completed?"highlight":"highlight-todo")):(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo")))})));else if("bpmn:ExclusiveGateway"===i.$type){var h;if(n)e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(h=i.outgoing)||void 0===h||h.forEach((function(i){var o=t.taskList.find((function(t){return t.key===i.targetRef.id}));o&&(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo"))}))}else if("bpmn:ParallelGateway"===i.$type){var d;if(n)e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(d=i.outgoing)||void 0===d||d.forEach((function(i){var o=t.taskList.find((function(t){return t.key===i.targetRef.id}));o&&(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo"))}))}else if("bpmn:StartEvent"===i.$type)i.outgoing.forEach((function(o){var n=t.taskList.find((function(t){return t.key===o.targetRef.id}));if(n)return e.addMarker(o.id,"highlight"),void e.addMarker(i.id,"highlight")}));else if("bpmn:EndEvent"===i.$type&&a.key===i.id&&a.completed)return void e.addMarker(i.id,"highlight")}))}}},l=d,s=(i("00b6"),i("2877")),c=Object(s["a"])(l,o,n,!1,null,null,null);e["default"]=c.exports}}]);