(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-370ab3bc","chunk-834c75c4"],{"43e7":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("flow-view",{attrs:{flowData:t.flowData}})],1)},n=[],a=i("8bbf"),r={name:"Flow",components:{FlowView:a["default"]},props:{flowData:{type:Object,default:function(){}}},data:function(){return{}}},l=r,d=i("2877"),h=Object(d["a"])(l,o,n,!1,null,null,null);e["default"]=h.exports},"58ab":function(t,e,i){},"8bbf":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"containers main-box"},[i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-zoom-in"},on:{click:function(e){return t.zoomViewport(!0)}}},[t._v("放大")]),i("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-zoom-out"},on:{click:function(e){return t.zoomViewport(!1)}}},[t._v("缩小")]),i("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-rank"},on:{click:t.fitViewport}},[t._v("适中")]),i("div",{ref:"flowCanvas",staticClass:"canvas"})],1)},n=[],a=i("c7eb"),r=i("1da1"),l=(i("b64b"),i("d3b7"),i("159b"),i("7db0"),i("bf4a")),d={name:"FlowView",props:{flowData:{type:Object,default:function(){}}},data:function(){return{bpmnViewer:null}},watch:{flowData:{handler:function(t){Object.keys(t).length>0&&(this.bpmnViewer&&this.bpmnViewer.destroy(),this.bpmnViewer=new l["a"]({container:this.$refs.flowCanvas,height:"calc(100vh - 200px)"}),this.loadFlowCanvas(t))},immediate:!0,deep:!0}},mounted:function(){},methods:{loadFlowCanvas:function(t){var e=this;return Object(r["a"])(Object(a["a"])().mark((function i(){var o;return Object(a["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=e,i.prev=1,i.next=4,o.bpmnViewer.importXML(t.xmlData);case 4:o.fitViewport(),void 0!==t.nodeData&&t.nodeData.length>0&&o.fillColor(t.nodeData),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](1),console.error(i.t0.message,i.t0.warnings);case 11:case"end":return i.stop()}}),i,null,[[1,8]])})))()},setNodeColor:function(t,e,i){for(var o=0;o<t.length;o++)i.addMarker(t[o],e)},fitViewport:function(){this.zoom=this.bpmnViewer.get("canvas").zoom("fit-viewport","auto")},zoomViewport:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.zoom=this.bpmnViewer.get("canvas").zoom(),this.zoom+=t?.1:-.1,this.zoom>=.2&&this.bpmnViewer.get("canvas").zoom(this.zoom)},fillColor:function(t){var e=this.bpmnViewer.get("canvas");this.bpmnViewer.getDefinitions().rootElements[0].flowElements.forEach((function(i){var o,n=t.find((function(t){return t.key===i.id})),a=t.find((function(t){return!t.completed})),r=t[t.length-1];if("bpmn:UserTask"===i.$type)n&&(e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(o=i.outgoing)||void 0===o||o.forEach((function(i){var o=t.find((function(t){return t.key===i.targetRef.id}));o&&(a&&n.key===a.key&&!a.completed?(e.addMarker(i.id,a.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,a.completed?"highlight":"highlight-todo")):(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo")))})));else if("bpmn:ExclusiveGateway"===i.$type){var l;if(n)e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(l=i.outgoing)||void 0===l||l.forEach((function(i){var o=t.find((function(t){return t.key===i.targetRef.id}));o&&(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo"))}))}else if("bpmn:ParallelGateway"===i.$type){var d;if(n)e.addMarker(i.id,n.completed?"highlight":"highlight-todo"),null===(d=i.outgoing)||void 0===d||d.forEach((function(i){var o=t.find((function(t){return t.key===i.targetRef.id}));o&&(e.addMarker(i.id,o.completed?"highlight":"highlight-todo"),e.addMarker(i.targetRef.id,o.completed?"highlight":"highlight-todo"))}))}else if("bpmn:StartEvent"===i.$type)i.outgoing.forEach((function(o){var n=t.find((function(t){return t.key===o.targetRef.id}));if(n)return e.addMarker(o.id,"highlight"),void e.addMarker(i.id,"highlight")}));else if("bpmn:EndEvent"===i.$type&&r.key===i.id&&r.completed)return void e.addMarker(i.id,"highlight")}))}}},h=d,c=(i("e86d"),i("2877")),f=Object(c["a"])(h,o,n,!1,null,null,null);e["default"]=f.exports},e86d:function(t,e,i){"use strict";i("58ab")}}]);