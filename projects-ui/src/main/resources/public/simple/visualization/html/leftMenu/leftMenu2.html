<!Doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../../../../thirdparty/layui/css/layui.css">
    <link rel="stylesheet" href="leftMenu.css">
    <script src="../../../../thirdparty/jquery/jquery-1.12.4.min.js"></script>
    <script src="../../../../thirdparty/layui/layui.all.js"></script>
    <script src="../../../../common/js/config.js"></script>
    <script src="../../js/commonVisual.js"></script>
</head>
<body>
<!--左侧栏目开始-->
<div class="widget_box">
    <div class="visual_left_menu widget_border_content">
        <div id="widgetLeftMenuView">
        </div>
    </div>
</div>
<!--左侧栏目模板渲染开始-->
<script type="text/html" id="widgetLeftMenuTpl">
    {{#  layui.each(d, function(index, item){ }} 
    {{#  if((index + 1) == d.length){ }}
    <h4>{{ item.name }}</h4>
    {{#  } }} 
    {{#  }); }}
    <ul>
    {{#  layui.each(d, function(index, item){ }} 
    {{#  if(index == 0){ }}
    <li class="cur">
        <a href="{{ item.listUrl }}">{{ item.name }}</a>
    </li>
    {{# }else if((index + 1) != d.length){ }}
    <li>
        <a href="{{ item.listUrl }}">{{ item.name }}</a>
    </li>
    {{#  } }} 
    {{#  }); }}
    </ul>
</script>
<!--左侧栏目模板渲染结束-->
<!--左侧栏目结束-->
<script>
/*
* 获取子栏目
*/
function getMenuSubColumn(){
    // var params = {
    //     "entity": {
    //         stop: 0,//栏目启用
    //         status: 0,
    //         parentId: "1549311770349408258"
    //     },
    //     "pager": {
    //         current: 1,
    //         size: 20
    //     }
    // };
    // ajax(service_prefix.manage,"/programa/list", "post", JSON.stringify(params)).then(function(data){
    //     if(data.success){
    //         getData(data.obj.records, '#widgetLeftMenuTpl', '#widgetLeftMenuView');
    //     }else{
    //         console.log(data.msg);
    //     }
    // });

    var columnId = "1549311770349408258";
    ajax(service_prefix.manage,"/programa/getColumn?id=" + columnId, "post").then(function(data){
        if(data.success){
            getData(data.obj, '#widgetLeftMenuTpl', '#widgetLeftMenuView');
        }else{
            console.log(data.msg);
        }
    });
}
getMenuSubColumn();
</script>
</body>
</html>